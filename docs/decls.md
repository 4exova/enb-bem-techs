Форматы описания деклараций БЭМ-сущностей
=========================================

bemdecl.js
----------

`bemdecl`-файлы являются основой для сборки страниц и бандлов. В них содержится информация о том, с каких блоков начать процесс раскрытия зависимостей.

Результатом обработки `bemdecl`-файлов являются `deps`-файлы. [Формат deps](deps.md).

`bemdecl`-файл может просто лежать в проекте, но может и генерироваться при сборке на основе [bemjson](bemjson.md)-файла.

### Описание формата bemdecl:

`bemdecl`-файлы описываются в виде node.js-модулей, экспортирующих поле `blocks`. Поле `blocks` содержит массив исходных блоков (элементов, модификаторов), с которых надо начать сборку.

Пример простого `bemdecl`-файла:

```javascript
module.exports.blocks = [
  { name: 'b-page' }
];
```

В большинстве проектов `bemdecl` выглядит именно так.

Рассмотрим полностью формат описания файла:

```javascript
module.exports.blocks = [
  {
    name: 'input', // имя блока
    mods: [ // список модификаторов
      { name: 'size', // имя модификатора
        vals: [ // список значений модификатора
          { name: 'm' }, // значение модификатора
          { name: 's' } // значение модификатора
        ]
      }
    ],
    elems: [ // список элементов
      { name: 'control', // имя элемента
        mods: [ // список модификаторов элемента
          { name: 'theme', // имя модификатора элемента
            vals: [ // значения модификатора элемента
              { name: 'normal' } // зачение модификатора элемента
            ]
          }
        ]
    ]
  }
];
```

deps.js
-------

Конечные `deps`-файлы содержат информацию о том, какие BEM-сущности участвуют в сборке проекта и в каком порядке необходимо включить их в сборку. Порядок очень важен, например, для JavaScript-файлов: если `BEM.DOM`-декларации в результирующием `js`-файле окажутся до самого класса BEM.DOM, то проект не будет работать.

`deps`-файл получается на основе [bemdecl](bemdecl.md)-файла в процессе сборки.

### Описание конечного формата deps

Конечные `deps`-файлы описываются в виде node.js-модулей, экспортирующих поле `deps`. Поле `deps` содержит массив зависимостей, описанных в соответствии со следующим форматом.

Рассмотрим полностью формат описания файла:

```javascript
module.exports.deps = [
  { block: 'input' }, // описание блока
  { block: 'input', mod: 'size', val: 'm' }, // описание модификатора блока
  { block: 'input', mod: 'size', val: 's' }, // описание модификатора блока, несколько значений модификатора нельзя объединять
  { block: 'input', elem: 'control' }, // описание элемента
  { block: 'input', elem: 'control', mod: 'theme', val: 'normal' } // описание модификатора элемента
];
```




